# Нумераторы в Rust
*Нумераторы(Enum)* это способ определения кастомного типа данных, который отличается от структур(Struct). 
Рассмотрим их на примере. Допустим мы работаем с IP адрессами. На данный момент два главных стандарта это IPv4 и IPv6. Так как есть только два варианта того какого стандарта будет наш ip-адресс то мы можем *пронумеровать* все возможные варианты. ip-адресс не может одновременно быть из двух стандартов. При этом ip-адресс остаётся ip-адрессом.
Мы можем реализовать эту концепцию определяя нумерацию `IpAddrKind` перечисляя все возможные типы ip-адрессов.
```rust
enum IpAddrKind {
	V4,
	V6,
}
```
Теперь тип `IpAddrKind` является кастомным типом данных который мы сможем использовать где-то ещё в нашем коде.
#### Значения `Enum`
Мы можем создать инстанс для каждого из двух вариантов `IpAddrKind` с помощью следующей конструкции
```rust
	let four = IpAddrKind::V4;
	let six = IpAddrKind::V6;
```

Таким образом, у нас могут быть два совершенно разных значения которые будут иметь связанный тип `IpAddrKind` и мы можем указать внутри функции что она сможет принимать данный тип переменных.
```rust
fn route(ip_kind: IpAddrKind) {}
```

И можем вызвать эту функцию только в двух вариантах
```rust
	route(IpAddrKind::V4);
	route(IpAddrKind::V6);
```
#### Взаимодействие со структурами
Допустим у нас есть следующая реализация 
```rust
fn main() {
    enum IpAddrKind {
        V4,
        V6,
    }

    struct IpAddr {
        kind: IpAddrKind,
        address: String,
    }

    let home = IpAddr {
        kind: IpAddrKind::V4,
        address: String::from("127.0.0.1"),
    };

    let loopback = IpAddr {
        kind: IpAddrKind::V6,
        address: String::from("::1"),
    };
}

```

Пример для ip-адресов, используя enum как тип поля в структуре.

Но, мы можем обойтись без структур, указывая тип данных в enum напрямую:
```rust
	enum IpAddr {
		V4(String),
		V6(String),
	}
	
	let home = IpAddr::V4(String::from("127.0.0.1"));
	
	let loopback = IpAddr::V6(String::from("::1"));
```

По сути, каждое поле в нумераторе является функцией которой мы указываем тип, т.е. в случае выше `IpAddr::V4()` является функцией которая принимает в себя строку и возвращает инстанс типа `IpAddr`.

#### Enum с множеством вложенных типов
Рассмотрим следующий пример
```rust
enum Message {
	Quit,
	Move { x: i32, y: i32},
	Write(String),
	ChangeColor(i32, i32, i32),
}
```
Данный нумератор содержит в себе четыре различных типа
- `Quit` не имеет никаких связанных данных вообще.
- `Move` имеет именованые поля, как в структурах
- `Write` включает в себя единственную Строку
- `ChangeColor` включает в себя три `i32` значения.

В отличии от структур, нумераторы позволяют обьединять все подобные сложные типы в один. Реализация кода выше, не используя нумераторы:

```rust
struct QuitMessage; // единичная структура
struct MoveMessage {
    x: i32,
    y: i32,
}
struct WriteMessage(String); // структура таплов
struct ChangeColorMessage(i32, i32, i32); // структура таплов
```

В данном случае мы не можем так же легко задать функцию для подобных типов сообщений, чем когда мы использовали нумератор `Message`.

#### Методы для нумераторов
Как и для структур, мы можем определить методы, например
```rust
	impl Message {
		fn call(&self) {
			...
		}
	}
	
	let m = Message::Write(String::from("Zdarow"));
	m.call();
```
#### Линки
- [[Struct в Rust]],
- [[Типы данных в Rust]],
- [[How to define a variable in Rust]],
- [[Методы в Rust]],
- [[Functions in Rust]]
#### Тэги
 #Программирование/Rust 
#### Источники
 https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html